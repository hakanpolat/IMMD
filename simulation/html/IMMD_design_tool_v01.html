
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>IMMD DESIGN TOOL</title><meta name="generator" content="MATLAB 8.1"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2017-04-12"><meta name="DC.source" content="IMMD_design_tool_v01.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, tt, code { font-size:12px; }
pre { margin:0px 0px 20px; }
pre.error { color:red; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>IMMD DESIGN TOOL</h1><!--introduction--><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">M. U&#287;ur</a></li><li><a href="#2">2017</a></li><li><a href="#4">SPECIFICATIONS</a></li><li><a href="#12">Fundamental blocks:</a></li><li><a href="#19">General Inputs</a></li><li><a href="#22">Stator Parameters</a></li><li><a href="#23">Rotor Parameters</a></li><li><a href="#24">Rectifier parameters</a></li><li><a href="#25">DC Link parameters</a></li><li><a href="#26">Inverter Parameters</a></li><li><a href="#27">Motor design continue</a></li><li><a href="#28">RL Load design</a></li><li><a href="#31">JUST A SMALL TEST CODE</a></li><li><a href="#32">ANOTHER TRIAL</a></li></ul></div><h2>M. U&#287;ur<a name="1"></a></h2><h2>2017<a name="2"></a></h2><p>In this file, design of the IMMD system will be conducted. Analytical design methods will be used with the aid of simulations. The relations between the blocks will be considered. The design is for the prototype on BAP Project.</p><h2>SPECIFICATIONS<a name="4"></a></h2><p>Permanent Magnet Brushless DC Motor (PM-BLDC)</p><p>Cooling: Forced air cooling</p><p>Motor efficiency aim = 98 %</p><p>Power stage efficiency aim = 98 %</p><p>Average winding temperature rise: 130 C</p><p>Hot spot temperature rise: 160 C</p><p>Semiconductor temperature rise: 100 C</p><p>Maximum winding temperature: 200 C</p><h2>Fundamental blocks:<a name="12"></a></h2><p>Rotor</p><p>Stator</p><p>Inverter</p><p>DC Link</p><p>Rectifier</p><p>Controller</p><p>Heat sink</p><h2>General Inputs<a name="19"></a></h2><p>motor catalog (Kollmorgen, KBM(S)-88X00-X, B)</p><p><a href="http://productpage.3dpublisher.net/3dproductpage/Qsvalidlogin.asp?GUID=1249850940083&amp;name=KBM(S)-88&amp;isCate=true">http://productpage.3dpublisher.net/3dproductpage/Qsvalidlogin.asp?GUID=1249850940083&amp;name=KBM(S)-88&amp;isCate=true</a></p><p><a href="http://www.kollmorgen.com/en-us/products/motors/direct-drive/kbm-series-frameless/_literature/kbm-selection-guide-en-us_revg/">http://www.kollmorgen.com/en-us/products/motors/direct-drive/kbm-series-frameless/_literature/kbm-selection-guide-en-us_revg/</a></p><pre class="codeinput">Prated = 5.46e3; <span class="comment">% Watts</span>
Nrated = 1000; <span class="comment">% rpm</span>
Tstall_cont = 102; <span class="comment">% Nm</span>
Icont = 20.5; <span class="comment">% Amps</span>
Tstall_peak = 145; <span class="comment">% Nm</span>
Ipeak = 48.3; <span class="comment">% amps</span>
torque_sens = 5.06; <span class="comment">% Nm/Arms</span>
back_emfc = 306; <span class="comment">% Vrms/kRPM</span>
motor_cons = 6.10; <span class="comment">% Nm/sqrt(Watt)</span>
res_ltol = 0.46; <span class="comment">% Omhs</span>
induct = 4.5; <span class="comment">% mH</span>
inertia = 5.26e-2; <span class="comment">% kgm^2</span>
friction_static = 1.08; <span class="comment">% Nm</span>
Tcogging_pp = 0.81; <span class="comment">% Nm</span>
friction_viscous = 0.385; <span class="comment">% Nm/kRPM</span>
Rth = 0.305; <span class="comment">% C/W</span>
pole_number = 46;
slot_number = 36;

length = 36.37; <span class="comment">% mm</span>
outer_dia = 331.46; <span class="comment">% mm</span>
Di_rotor = 155.02; <span class="comment">% mm</span>

<span class="comment">% basic inputs and calculations</span>
module = 4;
wrated = Nrated*2*pi/60; <span class="comment">% rad/s</span>
Pout_total = Prated; <span class="comment">% Watts</span>
Trated = Pout_total/wrated; <span class="comment">% Nm</span>
Pout_module = Pout_total/module; <span class="comment">% Watts</span>
<span class="comment">% Inverter configuration: 0 for H-bridge, 1 for 3-phase bridge</span>
inverter_config = 0;
<span class="comment">% winding configuration: 0 for distributed, 1 for concentrated</span>
winding_config = 0;
</pre><h2>Stator Parameters<a name="22"></a></h2><pre class="codeinput">slot_s = slot_number;
phase_s = 3;
pole_r = pole_number;
pole_s = 8;
q_s = slot_s/phase_s/pole_r;
<span class="comment">% slot per module</span>
y_s = slot_s/module;
layer_s = 2;
zQ = 10; <span class="comment">% number of turns per coil side</span>

<span class="comment">% Number of turns per phase per module</span>
Nphm = layer_s*zQ*q_s;

<span class="comment">% mechanical</span>
Do_s = 0.15; <span class="comment">% m</span>
Di_s = 0.1; <span class="comment">% m</span>
L_s = 0.1; <span class="comment">% m</span>
Surface_s = pi*Di_s*L_s; <span class="comment">% m^2</span>
Circum_s = pi*Di_s; <span class="comment">% m</span>
Volume_i = Di_s^2*L_s*pi/4; <span class="comment">% m^3</span>

<span class="comment">% winding factor</span>
<span class="keyword">if</span> winding_config == 0
    pitch = 2/3;
    pitch_angle = pitch*pi; <span class="comment">% electrical radians</span>
    slot_angle = (pole_s/2)*2*pi/slot_s; <span class="comment">% electrical radians</span>
    slot_pitch =Circum_s/slot_s; <span class="comment">% m</span>
    <span class="comment">% pitch factor</span>
    kp1 = sin(pitch_angle/2);
    <span class="comment">% distribution factor</span>
    kd1 = sin(q_s*slot_angle/2)/(q_s*sin(slot_angle/2));
    <span class="comment">% winding factor</span>
    kw1 = kp1*kd1;
<span class="keyword">elseif</span> winding_config == 1
    kw1 = 0.867; <span class="comment">% 36/46, all teeth wound</span>
    <span class="comment">%kw1 = 0.87; % 36/46, alternate teeth wound</span>
<span class="keyword">end</span>

<span class="comment">% peak flux density and flux</span>
Bgap = 0.9; <span class="comment">% Tesla</span>

flux_pp = 4*(Di_s/2)*L_s*Bgap/pole_s; <span class="comment">% Weber</span>
</pre><h2>Rotor Parameters<a name="23"></a></h2><pre class="codeinput">pole_r = 8;
Do_r = 100; <span class="comment">% mm</span>
Di_r = 30; <span class="comment">% mm</span>
shaft_dia = Di_r; <span class="comment">% mm</span>

motor_eff = 0.9;
</pre><h2>Rectifier parameters<a name="24"></a></h2><pre class="codeinput">fs = 50; <span class="comment">% Hz</span>
Vs_ll = 400; <span class="comment">% Volts</span>
Vdc = (3/pi)*Vs_ll*sqrt(2); <span class="comment">% Volts</span>
</pre><h2>DC Link parameters<a name="25"></a></h2><h2>Inverter Parameters<a name="26"></a></h2><pre class="codeinput"><span class="comment">% connection</span>
series = 2;
parallel = module/series;

<span class="comment">% modulation technique: 0 for SPWM, 1 for SVPWM</span>
mod_tech = 1;

<span class="comment">% voltage by module</span>
Vdc_module = Vdc/series;
ma = 1;
<span class="keyword">if</span> mod_tech == 0
    Vph_module = Vdc_module*ma/(2*sqrt(2)); <span class="comment">% Vrms</span>
    <span class="comment">% 0.612 = sqrt(3/2)/2: Mohan equation for line-line voltage</span>
<span class="keyword">elseif</span> mod_tech == 1
    Vph_module = Vdc_module*ma/(sqrt(2*3)); <span class="comment">% Vrms</span>
<span class="keyword">end</span>


<span class="comment">% power by module</span>
pf = 0.87;
Pout_inv_module = Pout_module/motor_eff; <span class="comment">% W</span>
Sout_inv_module = Pout_inv_module/pf; <span class="comment">% VA</span>
Iline = Sout_inv_module/(3*Vph_module); <span class="comment">% Amps</span>


<span class="comment">% frequency and speed</span>
ffund = 100; <span class="comment">% Hz</span>
Nsync = 120*ffund/pole_s; <span class="comment">% rpm</span>
wsync = Nsync*2*pi/60; <span class="comment">% rad/s</span>
fsw = 100e3; <span class="comment">% Hz</span>

<span class="comment">% induced_voltage_per_module_per_phase</span>
Erms = 4.44*ffund*flux_pp*kw1*Nphm; <span class="comment">% Volts</span>
</pre><h2>Motor design continue<a name="27"></a></h2><pre class="codeinput">Ipeak = Iline*sqrt(2); <span class="comment">% Amps</span>
MMF_peak = (phase_s/2)*(4/pi)*(Nphm*Ipeak)*kw1; <span class="comment">% A-t</span>
perm_air = 4*pi*1e-7; <span class="comment">% H/m</span>

<span class="comment">% conductors</span>

<span class="comment">% frequency constraint</span>
fmax = ffund*2; <span class="comment">% Hz</span>
copper_res = 1.7e-8; <span class="comment">% Ohm*m</span>
copper_perm = 1.256629e-6; <span class="comment">% H/m</span>
ang_freq = 2*pi*fmax; <span class="comment">% rad/sec</span>
skin_depth = sqrt(copper_res*2/(ang_freq*copper_perm)); <span class="comment">% m</span>
max_cond_dia = 2*skin_depth; <span class="comment">% m</span>

<span class="comment">% current constraint</span>
current_density = 7; <span class="comment">% A/mm^2</span>
copper_area = Iline/current_density; <span class="comment">% mm^2</span>
copper_radius = sqrt(copper_area/pi); <span class="comment">% mm</span>
copper_diameter = copper_radius*2; <span class="comment">% mm</span>

<span class="comment">% wire selection: % AWG#16</span>
wire_diameter = 1.29032; <span class="comment">% mm</span>
wire_radius = wire_diameter/2; <span class="comment">% mm</span>
wire_strand = 1;
wire_area = pi*wire_radius^2; <span class="comment">% mm^2</span>
stator_current_density = Iline/(wire_area*wire_strand); <span class="comment">% A/mm^2</span>

<span class="comment">% fill factor</span>
wire_diameter_insulation = wire_diameter*1.1; <span class="comment">% mm</span>
wire_area_insulation = pi*(wire_diameter_insulation/2)^2; <span class="comment">% mm^2</span>
total_stator_wire_area = wire_strand*wire_area_insulation; <span class="comment">% mm^2</span>
total_stator_slot_wire_area = layer_s*zQ*total_stator_wire_area; <span class="comment">% mm^2</span>
<span class="comment">% this value is not set right now</span>
slot_area = 100; <span class="comment">% mm^2</span>
fill_factor = total_stator_slot_wire_area/slot_area;
</pre><h2>RL Load design<a name="28"></a></h2><pre class="codeinput">V1load = Vph_module; <span class="comment">% V</span>
S1load = Sout_inv_module/3; <span class="comment">% VA</span>
I1load = S1load/V1load; <span class="comment">% A</span>
Z1load = V1load/I1load; <span class="comment">% Ohms</span>
R1load = Z1load*pf; <span class="comment">% Ohms</span>
X1load = sqrt(Z1load^2-R1load^2); <span class="comment">% Ohms</span>
L1load = X1load/(2*pi*ffund); <span class="comment">% Henries</span>

<span class="comment">% resistor</span>
res_val = R1load; <span class="comment">% Ohms</span>
res_cur = I1load; <span class="comment">% A</span>
res_pow = I1load^2*R1load; <span class="comment">% W</span>
</pre><p>sample: <a href="http://tr.farnell.com/arcol-ohmite/fpa100-100r-j/res-thick-film-100r-5-1kv-screw/dp/2505103">http://tr.farnell.com/arcol-ohmite/fpa100-100r-j/res-thick-film-100r-5-1kv-screw/dp/2505103</a></p><p>heat sink design is required for the resistive load</p><h2>JUST A SMALL TEST CODE<a name="31"></a></h2><pre class="codeinput">slot = [6,9,12,15,18,21,24,27,30,33,36];
<span class="comment">%slot = 6;</span>
pole = [4,6,8,10,12,14,16,20,22,24,26,28,30,32,34,42];
<span class="comment">%pole = 4;</span>
<span class="keyword">for</span> k = 1:numel(slot)
    <span class="keyword">for</span> l = 1:numel(pole)
        full_pitch = 180/(pole(l)/2);
        slot_pitch = 360/slot(k);
        span = slot_pitch/full_pitch;
        winding = abs(sin(span*pi));
        <span class="comment">%fprintf('Winding factor for %d slot and %d pole is %1.3g.\n',slot(k),pole(l),winding);</span>
    <span class="keyword">end</span>
<span class="keyword">end</span>
</pre><h2>ANOTHER TRIAL<a name="32"></a></h2><pre class="codeinput">slot = 6;
pole = 8;
winding = sin(pole*pi/slot);
winding = abs(winding);
disp(winding);
</pre><pre class="codeoutput">    0.8660

</pre><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2013a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% IMMD DESIGN TOOL
%% M. UÄŸur
%% 2017
%%
% In this file, design of the IMMD system will be conducted.
% Analytical design methods will be used with the aid of simulations.
% The relations between the blocks will be considered.
% The design is for the prototype on BAP Project.

%% SPECIFICATIONS
% Permanent Magnet Brushless DC Motor (PM-BLDC)
%%
% Cooling: Forced air cooling
%%
% Motor efficiency aim = 98 %
%%
% Power stage efficiency aim = 98 %
%%
% Average winding temperature rise: 130 C
%%
% Hot spot temperature rise: 160 C
%%
% Semiconductor temperature rise: 100 C
%%
% Maximum winding temperature: 200 C


%% Fundamental blocks:
% Rotor
%%
% Stator
%%
% Inverter
%%
% DC Link
%%
% Rectifier
%%
% Controller
%%
% Heat sink

%% General Inputs
% motor catalog (Kollmorgen, KBM(S)-88X00-X, B)
%%
% http://productpage.3dpublisher.net/3dproductpage/Qsvalidlogin.asp?GUID=1249850940083&name=KBM(S)-88&isCate=true
%%
% http://www.kollmorgen.com/en-us/products/motors/direct-drive/kbm-series-frameless/_literature/kbm-selection-guide-en-us_revg/
Prated = 5.46e3; % Watts
Nrated = 1000; % rpm
Tstall_cont = 102; % Nm
Icont = 20.5; % Amps
Tstall_peak = 145; % Nm
Ipeak = 48.3; % amps
torque_sens = 5.06; % Nm/Arms
back_emfc = 306; % Vrms/kRPM
motor_cons = 6.10; % Nm/sqrt(Watt)
res_ltol = 0.46; % Omhs
induct = 4.5; % mH
inertia = 5.26e-2; % kgm^2
friction_static = 1.08; % Nm
Tcogging_pp = 0.81; % Nm
friction_viscous = 0.385; % Nm/kRPM
Rth = 0.305; % C/W
pole_number = 46;
slot_number = 36;

length = 36.37; % mm
outer_dia = 331.46; % mm
Di_rotor = 155.02; % mm

% basic inputs and calculations
module = 4;
wrated = Nrated*2*pi/60; % rad/s
Pout_total = Prated; % Watts
Trated = Pout_total/wrated; % Nm
Pout_module = Pout_total/module; % Watts
% Inverter configuration: 0 for H-bridge, 1 for 3-phase bridge
inverter_config = 0;
% winding configuration: 0 for distributed, 1 for concentrated
winding_config = 0;

%% Stator Parameters
slot_s = slot_number;
phase_s = 3;
pole_r = pole_number;
pole_s = 8;
q_s = slot_s/phase_s/pole_r;
% slot per module
y_s = slot_s/module;
layer_s = 2;
zQ = 10; % number of turns per coil side

% Number of turns per phase per module
Nphm = layer_s*zQ*q_s;

% mechanical
Do_s = 0.15; % m
Di_s = 0.1; % m
L_s = 0.1; % m
Surface_s = pi*Di_s*L_s; % m^2
Circum_s = pi*Di_s; % m
Volume_i = Di_s^2*L_s*pi/4; % m^3

% winding factor
if winding_config == 0
    pitch = 2/3;
    pitch_angle = pitch*pi; % electrical radians
    slot_angle = (pole_s/2)*2*pi/slot_s; % electrical radians
    slot_pitch =Circum_s/slot_s; % m
    % pitch factor
    kp1 = sin(pitch_angle/2);
    % distribution factor
    kd1 = sin(q_s*slot_angle/2)/(q_s*sin(slot_angle/2));
    % winding factor
    kw1 = kp1*kd1;
elseif winding_config == 1
    kw1 = 0.867; % 36/46, all teeth wound
    %kw1 = 0.87; % 36/46, alternate teeth wound
end

% peak flux density and flux
Bgap = 0.9; % Tesla

flux_pp = 4*(Di_s/2)*L_s*Bgap/pole_s; % Weber


%% Rotor Parameters
pole_r = 8;
Do_r = 100; % mm
Di_r = 30; % mm
shaft_dia = Di_r; % mm

motor_eff = 0.9;


%% Rectifier parameters

fs = 50; % Hz
Vs_ll = 400; % Volts
Vdc = (3/pi)*Vs_ll*sqrt(2); % Volts



%% DC Link parameters




%% Inverter Parameters

% connection
series = 2;
parallel = module/series;

% modulation technique: 0 for SPWM, 1 for SVPWM
mod_tech = 1;

% voltage by module
Vdc_module = Vdc/series;
ma = 1;
if mod_tech == 0
    Vph_module = Vdc_module*ma/(2*sqrt(2)); % Vrms
    % 0.612 = sqrt(3/2)/2: Mohan equation for line-line voltage
elseif mod_tech == 1
    Vph_module = Vdc_module*ma/(sqrt(2*3)); % Vrms
end


% power by module
pf = 0.87;
Pout_inv_module = Pout_module/motor_eff; % W
Sout_inv_module = Pout_inv_module/pf; % VA
Iline = Sout_inv_module/(3*Vph_module); % Amps


% frequency and speed
ffund = 100; % Hz
Nsync = 120*ffund/pole_s; % rpm
wsync = Nsync*2*pi/60; % rad/s
fsw = 100e3; % Hz

% induced_voltage_per_module_per_phase
Erms = 4.44*ffund*flux_pp*kw1*Nphm; % Volts


%% Motor design continue

Ipeak = Iline*sqrt(2); % Amps
MMF_peak = (phase_s/2)*(4/pi)*(Nphm*Ipeak)*kw1; % A-t
perm_air = 4*pi*1e-7; % H/m

% conductors

% frequency constraint
fmax = ffund*2; % Hz
copper_res = 1.7e-8; % Ohm*m
copper_perm = 1.256629e-6; % H/m
ang_freq = 2*pi*fmax; % rad/sec
skin_depth = sqrt(copper_res*2/(ang_freq*copper_perm)); % m
max_cond_dia = 2*skin_depth; % m

% current constraint
current_density = 7; % A/mm^2
copper_area = Iline/current_density; % mm^2
copper_radius = sqrt(copper_area/pi); % mm
copper_diameter = copper_radius*2; % mm

% wire selection: % AWG#16
wire_diameter = 1.29032; % mm
wire_radius = wire_diameter/2; % mm
wire_strand = 1;
wire_area = pi*wire_radius^2; % mm^2
stator_current_density = Iline/(wire_area*wire_strand); % A/mm^2

% fill factor
wire_diameter_insulation = wire_diameter*1.1; % mm
wire_area_insulation = pi*(wire_diameter_insulation/2)^2; % mm^2
total_stator_wire_area = wire_strand*wire_area_insulation; % mm^2
total_stator_slot_wire_area = layer_s*zQ*total_stator_wire_area; % mm^2
% this value is not set right now
slot_area = 100; % mm^2
fill_factor = total_stator_slot_wire_area/slot_area;



%% RL Load design
V1load = Vph_module; % V
S1load = Sout_inv_module/3; % VA
I1load = S1load/V1load; % A
Z1load = V1load/I1load; % Ohms
R1load = Z1load*pf; % Ohms
X1load = sqrt(Z1load^2-R1load^2); % Ohms
L1load = X1load/(2*pi*ffund); % Henries

% resistor
res_val = R1load; % Ohms
res_cur = I1load; % A
res_pow = I1load^2*R1load; % W

%%
% sample: http://tr.farnell.com/arcol-ohmite/fpa100-100r-j/res-thick-film-100r-5-1kv-screw/dp/2505103
%%
% heat sink design is required for the resistive load


%% JUST A SMALL TEST CODE
slot = [6,9,12,15,18,21,24,27,30,33,36];
%slot = 6;
pole = [4,6,8,10,12,14,16,20,22,24,26,28,30,32,34,42];
%pole = 4;
for k = 1:numel(slot)
    for l = 1:numel(pole)
        full_pitch = 180/(pole(l)/2);
        slot_pitch = 360/slot(k);
        span = slot_pitch/full_pitch;
        winding = abs(sin(span*pi));
        %fprintf('Winding factor for %d slot and %d pole is %1.3g.\n',slot(k),pole(l),winding);
    end
end

%% ANOTHER TRIAL

slot = 6;
pole = 8;
winding = sin(pole*pi/slot);
winding = abs(winding);
disp(winding);



##### SOURCE END #####
--></body></html>